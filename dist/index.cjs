"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});var p=(e=>(e.px="px",e.em="em",e.rem="rem",e.vw="vw",e.vh="vh",e.percent="%",e))(p||{});function x(e){return{value:e,unit:"px"}}function g(e){return{value:e,unit:"em"}}function y(e){return{value:e,unit:"rem"}}function w(e){return{value:e,unit:"vw"}}function E(e){return{value:e,unit:"vh"}}function A(e){return{value:e,unit:"%"}}class c{constructor(){}_style={};_events={};_id;_classes=[];_tag;_attribute={};_text;mount(t){return document.querySelector(t)?.replaceWith(this.render()),this}render(t){t||(t=document.createElement(this._tag??"div"));for(const s in this._style){const n=this._style[s];n instanceof Object?n.value.subscribe?n.value.subscribe(i=>{t&&(t.style[s]=`${i}${n.unit}`)}):n.subscribe?n.subscribe(i=>{t&&(t.style[s]=i)}):t.style[s]=`${n.value}${n.unit}`:t.style[s]=n}for(const s in this._events)t.addEventListener(s,this._events[s]);this._id&&(t.id=this._id),this._classes.length>0&&t.classList.add(...this._classes);for(const s in this._attribute)typeof this._attribute[s]=="string"?t.setAttribute(s,this._attribute[s]):(t.setAttribute(s,this._attribute[s].value),this._attribute[s].subscribe(n=>{t&&t.setAttribute(s,n)}));return this._text&&(typeof this._text=="string"?t.textContent=this._text:(t.textContent=this._text.value,this._text.subscribe(s=>{t&&(t.textContent=s)}))),t}id(t){return this._id=t,this}class(...t){return t.length===1?this._classes=t[0].split(" "):this._classes=t,this}tag(t){return this._tag=t,this}attribute(t){return this._attribute=Object.assign(this._attribute,t),this}style(t){return this._style=Object.assign(this._style,t),this}text(t){return this._text=t,this}padding(t){if(t.unit)return this.style({padding:t});{const{top:s,left:n,right:i,bottom:u,vertical:l,horizontal:r}=t;return l||r?this.style({paddingTop:l,paddingBottom:l,paddingLeft:r,paddingRight:r}):this.style({paddingTop:s,paddingBottom:u,paddingLeft:n,paddingRight:i})}}get full(){return this.style({width:"100%",height:"100%"})}get expand(){return this.style({flex:"1"})}event(t){return this._events=Object.assign(this._events,t),this}}class o extends c{_children;constructor(t=[]){super(),typeof t=="string"?this.text(t):this._children=t}render(t){return t||(t=document.createElement("div")),this._children?.forEach(s=>{t?.appendChild(s.render())}),super.render(t)}}function C(e){return new o(e)}class B extends c{constructor(t){super(),this._text=t}render(){const t=document.createElement("span");return super.render(t)}get center(){return this._style.verticalAlign="middle",this._style.textAlign="center",this}}function S(e){return new B(e)}exports._currentBuilder=null;class b extends c{_func;_instanceElement;_states=new Map;_statePointer=0;constructor(t,s){super(),exports._currentBuilder=this,this._func=t,s&&s.forEach(n=>{n.subscribe(()=>{this.build()})})}subscribe(t){this._states.forEach((s,n)=>{const i=this._states.get(n);i instanceof f&&(i.builder=this,i.subscribe(t))})}render(){const t=super.render(this._func(this.build.bind(this)).render());return this._instanceElement?h(this._instanceElement,t):this._instanceElement=t,this._statePointer=0,t}build(){this.render()}}function h(e,t){if(!e||!t||e.isEqualNode(t))return;e.tagName!==t.tagName&&e.replaceWith(t);const s=e.attributes,n=t.attributes;if(s&&n){for(let r=0;r<s.length;r++){const a=s[r],_=n.getNamedItem(a.name);_?_.value!==a.value&&e.setAttribute(a.name,_.value):e.removeAttribute(a.name)}for(let r=0;r<n.length;r++){const a=n[r];s.getNamedItem(a.name)||e.setAttribute(a.name,a.value)}}const i=e.childNodes,u=t.childNodes,l=Math.max(i.length,u.length);if(l==0)e.textContent!==t.textContent&&(e.textContent=t.textContent);else for(let r=0;r<l;r++){if(r>=i.length){e.appendChild(u[r]);continue}if(r>=u.length){e.removeChild(i[r]);continue}h(i[r],u[r])}return e}function I(e,t){return new b(e,t)}class f{value;builder;callbacks=[];constructor(t,s){this.value=t,this.builder=s}get(t){const s=m(this.value[t]);return s.subscribe(()=>{this.value[t]=s.value}),s}subscribe(t){this.callbacks.push(t)}set(t){this.value=t,this.callbacks.forEach(s=>{s(t)})}}function m(e){const t=exports._currentBuilder;let s=0;return t&&(s=t._statePointer,t._statePointer++,t._states.has(s)?e=t._states.get(s):t._states.set(s,e)),new Proxy(new f(e,t),{set(n,i,u,l){return n.builder?._states.set(s,u),i=="value"?n.set(u):Reflect.set(n,i,u,l),n.builder?.build(),!0}})}class T extends o{constructor(t=[]){super(t)}render(){const t=document.createElement("button");return super.render(t)}}function F(e){return new T(e)}class d extends o{constructor(t=[]){super(t),this.style({display:"flex"})}get center(){return this._style.alignItems="center",this._style.justifyContent="center",this}}function k(e=[]){return new d(e)}class N extends d{constructor(t=[]){super(t),this.style({flexDirection:"column"})}}function W(e){return new N(e)}class P extends d{constructor(t=[]){super(t),this.style({flexDirection:"row"})}}function R(e){return new P(e)}class O extends o{_children;constructor(t=[]){super(),this._children=t,this._children.forEach(s=>{s._style.position="absolute"}),this.style({position:"relative"})}}function j(e){return new O(e)}class L extends c{_model;constructor(t){super(),this._model=t,t&&this.event({input:s=>{t.value=s.target.value}})}render(){const t=document.createElement("textarea");return t.value=this._model?.value||"",this._model?.subscribe(s=>{t.value=s}),super.render(t)}}function $(e){return new L(e)}class H extends c{_model;constructor(t){super(),t&&(this._model=t,this.attribute({value:t.value}),this.event({input:s=>{t.value=s.target.value}}))}render(){const t=document.createElement("input");return this._model?.subscribe(s=>{t.value=s}),super.render(t)}}function M(e){return new H(e)}class V extends c{constructor(t){super(),this.style({height:t})}}function q(e){return new V(e)}class D extends c{constructor(t){super(),this.style({width:t})}}function z(e){return new D(e)}class G extends c{_src;constructor(t){super(),this.attribute({src:t})}render(){const t=document.createElement("img");return super.render(t)}}function J(e){return new G(e)}class v extends o{_state;_builder;_instanceElement;_parent;constructor(t,s,n){super(),this._state=t,this._builder=s,this._parent=n,this._state.subscribe(()=>{console.log("subscribed"),this.build()})}build(){this._instanceElement&&(console.log(this._instanceElement,this.render()),h(this._instanceElement,this.render()))}render(){let t=0;this._children=[];for(const n of this._state.value){const i=this._builder(n,t++);this._children.push(i)}const s=super.render(this._parent?.render());return this._instanceElement?s:this._instanceElement=s}}function K(e,t,s){return new v(e,t,s)}exports.BuderState=f;exports.BuderUnits=p;exports.BuderWidget=c;exports.Builder=I;exports.Button=F;exports.Col=W;exports.Flex=k;exports.ForEach=K;exports.H=q;exports.Image=J;exports.Input=M;exports.Row=R;exports.Stack=j;exports.State=m;exports.Text=S;exports.TextArea=$;exports.View=C;exports.W=z;exports._Builder=b;exports._Flex=d;exports._ForEach=v;exports._View=o;exports.diffApply=h;exports.em=g;exports.percent=A;exports.px=x;exports.rem=y;exports.vh=E;exports.vw=w;
