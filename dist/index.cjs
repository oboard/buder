"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class a{constructor(){}_instanceElement;_children;_style={};_events={};_id;_classes=[];_tag;_attr={};_text;_type;mount(t){return document.querySelector(t)?.replaceWith(this.render()),this}render(t){t||(t=document.createElement(this._tag??"div"));for(const n in this._style){const s=this._style[n];s instanceof Object?s.value instanceof c?s.value.init(i=>{t&&(t.style[n]=`${i}${s.unit}`)}):s instanceof c?s.init(i=>{t&&(t.style[n]=i)}):t.style[n]=`${s.value}${s.unit}`:t.style[n]=s}for(const n in this._events)for(const s of this._events[n])t.addEventListener(n,s);this._id&&(t.id=this._id),this._classes.forEach(n=>{typeof n=="string"?n&&t&&t.classList.add(n):n instanceof Array?t.classList.add(...n):n instanceof c&&n.subscribe(s=>{if(t){t.classList.add(...s.filter(i=>t&&!t.classList.contains(i)));for(const i of t.classList)s.includes(i)||t.classList.remove(i)}})});for(const n in this._attr){const s=this._attr[n];s instanceof c?s.init(i=>{t&&t.setAttribute(n,i)}):typeof s=="string"&&t.setAttribute(n,s)}return this._text&&(this._text instanceof c?this._text.init(n=>{t&&(t.textContent=n)}):t.textContent=this._text),t}id(t){return this._id=t,this}class(t){return this._classes.push(t),this}tag(t){return this._tag=t,this}attr(t){return this._attr=Object.assign(this._attr,t),this}style(t){return this._style=Object.assign(this._style,t),this}text(t){return this._text=t,this}type(t){return this._type=t,this}padding(t){if(t.unit)return this.style({padding:t});{const{top:n,left:s,right:i,bottom:r,vertical:o,horizontal:u}=t;return o||u?this.style({paddingTop:o,paddingBottom:o,paddingLeft:u,paddingRight:u}):this.style({paddingTop:n,paddingBottom:r,paddingLeft:s,paddingRight:i})}}get full(){return this.style({width:"100%",height:"100%"})}get expand(){return this.style({flex:"1"})}event(t){for(const n in t)this._events[n]||(this._events[n]=[]),this._events[n].push(t[n]);return this}}exports._currentBuilder=null;class b extends a{_func;_states=new Map;_statePointer=0;constructor(t,n){super(),exports._currentBuilder=this,this._func=t,n&&n.forEach(s=>{s.subscribe(()=>{this.build()})})}bind(t){return t&&t.subscribe(()=>{this.build()}),this}subscribe(t){this._states.forEach((n,s)=>{const i=this._states.get(s);i instanceof c&&(i.builder=this,i.subscribe(t))})}render(){const t=super.render(this._func(this.build.bind(this)).render());return this._instanceElement?_(this._instanceElement,t):this._instanceElement=t,this._statePointer=0,t}build(){this.render()}}function _(e,t){if(!e||!t||e.isEqualNode(t))return;e.tagName!==t.tagName&&e.replaceWith(t);const n=e.attributes,s=t.attributes;if(n&&s){for(let u=0;u<n.length;u++){const l=n[u],m=s.getNamedItem(l.name);m?m.value!==l.value&&e.setAttribute(l.name,m.value):e.removeAttribute(l.name)}for(let u=0;u<s.length;u++){const l=s[u];n.getNamedItem(l.name)||e.setAttribute(l.name,l.value)}}const i=e.childNodes,r=t.childNodes,o=Math.max(i.length,r.length);if(o==0)e.textContent!==t.textContent&&(e.textContent=t.textContent);else for(let u=0;u<o;u++){if(u>=i.length){e.appendChild(r[u]);continue}if(u>=r.length){e.removeChild(i[u]);continue}_(i[u],r[u])}return e}function L(e,t){return new b(e,t)}class c{value;builder;callbacks=[];constructor(t,n){this.value=t,this.builder=n}get(t){const n=f(this.value[t]);return n.subscribe(()=>{this.value[t]=n.value}),n}transform(t,n){const s=f(t(this.value));return this.subscribe(()=>{const i=t(this.value);s.value!==i&&(s.value=i)}),s.subscribe(i=>{const r=n(i);this.value!==r&&(this.value=r)}),s}init(t){return this.subscribe(t),t(this.value),this}subscribe(t){return this.callbacks.push(t),this}computed(t){const n=f(t(this.value));return this.subscribe(()=>{n.set(t(this.value))}),n}set(t){this.value=t,this.callbacks.forEach(n=>{n(t)})}_set(t){this.value=t}}function f(e){const t=exports._currentBuilder;let n=0;return t&&(n=t._statePointer,t._statePointer++,t._states.has(n)?e=t._states.get(n):t._states.set(n,e)),new Proxy(new c(e,t),{set(s,i,r,o){return s.builder?._states.set(n,r),i=="value"?s.set(r):Reflect.set(s,i,r,o),s.builder?.build(),!0}})}function k(e,t){function n(s){s._children&&s._children.forEach(n);const i=s._type;function r(o){typeof o=="object"?s.style(o):s.class(o)}i&&(e instanceof c?e.init(o=>{r(o[i])}):r(e[i]))}return n(t),t}class h extends a{constructor(t){super(),t&&typeof t[0]=="string"?this.text(t[0]):this._children=t}render(t){return t||(t=document.createElement("div")),this._children?.forEach(n=>{if(n instanceof c){const s=n.value;s instanceof a&&n.init(i=>{const r=i.render();s._instanceElement?_(s._instanceElement,r):(s._instanceElement=r,t?.appendChild(r))})}else n.render instanceof Function&&t?.appendChild(n.render())}),super.render(t)}}function T(...e){return new h(e)}class v extends a{_type="text";constructor(t){super(),this._text=t}render(){const t=document.createElement(this._tag??"span");return super.render(t)}get center(){return this._style.verticalAlign="middle",this._style.textAlign="center",this}}function R(e){return new v(e)}class g extends h{_type="button";constructor(t=[]){super(t)}render(){const t=document.createElement("button");return super.render(t)}}function M(...e){return new g(e)}class p extends h{constructor(t){super(t),this.style({display:"flex"})}get center(){return this._style.alignItems="center",this._style.justifyContent="center",this}}function P(...e){return new p(e)}class y extends p{constructor(t){super(t),this.style({flexDirection:"column"})}}function W(...e){return new y(e)}class w extends p{constructor(t){super(t),this.style({flexDirection:"row"})}}function I(...e){return new w(e)}class N extends h{constructor(t=[]){super(t),this._children?.forEach(n=>{n.style({position:"absolute"})}),this.style({position:"relative"})}}function F(e){return new N(e)}class x extends a{_type="input";_tag="input";_model;constructor(t){super(),t&&(this._model=t,t instanceof c?(this.attr({value:t.value}),this.event({input:n=>{t.value=n.target.value}})):this.attr({value:t}))}render(){const t=document.createElement(this._tag);return(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement||t instanceof HTMLButtonElement)&&this._model instanceof c&&this._model?.init(n=>{t&&(t.value=n)}),super.render(t)}}function H(e){return new x(e)}class j extends x{_type="textarea";_tag="textarea";constructor(t){super(t)}render(){return super.render()}}function O(e){return new j(e)}class V extends a{constructor(t){super(),this.style({height:t})}}function $(e){return new V(e)}class q extends a{constructor(t){super(),this.style({width:t})}}function D(e){return new q(e)}class z extends a{_type="picture";_src;constructor(t){super(),this.attr({src:t})}render(){const t=document.createElement("img");return super.render(t)}}function G(e){return new z(e)}class E extends v{_tag="label";constructor(t){super(t)}for(t){return this.attr({for:t})}}function J(e){return new E(e)}class S extends a{_tag="input";_model;_type="checkbox";constructor(t){super(),t&&(this._model=t,this.attr({type:"checkbox",checked:t.value?"true":"false"}),this.event({input:n=>{t.value=!!n.target.checked}}))}render(){const t=super.render();return this._model?.init(n=>{t&&(t.checked=n)}),t}}function K(e){return new S(e)}class C extends a{_options;_type="slider";_tag="input";_model;constructor(t,n){super(),t&&(this._model=t,this._options=n,this.attr({value:t.value.toString()}),this.event({input:s=>{t.set(Number(s.target.value))}}))}render(){const t=document.createElement(this._tag);return t.type="range",t.min=this._options?.min?.toString()||"0",t.max=this._options?.max?.toString()||"100",t.step=this._options?.step?.toString()||"1",this._model?.subscribe(n=>{t&&(t.value=n.toString())}),t.value=(this._model?.value??"").toString(),super.render(t)}}const Q=(e,t)=>new C(e,t);class A extends h{_type="select";_model;_options;constructor(t){super(),t instanceof c?t.init(n=>{this._options=n}):this._options=t}bind(t){return this._model=t,this.event({change:n=>{t.set(n.target.value??"")}}),this}render(){const t=document.createElement("select");return this._options&&Object.entries(this._options).forEach(([n,s])=>{const i=document.createElement("option");i.value=n,i.text=s,t.appendChild(i)}),this._model?.init(n=>{t.value=n}),super.render(t)}}function X(e){return new A(e)}class Y extends a{context;width;height;constructor(t,n){super(),this.width=t,this.height=n}render(){const t=document.createElement("canvas");return this.context=t.getContext("2d"),t.width=this.width,t.height=this.height,super.render(t)}}const Z=(e,t)=>new Y(e,t),d={},U=e=>(t,n,s)=>{d[e]=s.value};var B=(e=>(e.px="px",e.em="em",e.rem="rem",e.vw="vw",e.vh="vh",e.percent="%",e))(B||{});function tt(e){return{value:e,unit:"px"}}function et(e){return{value:e,unit:"em"}}function nt(e){return{value:e,unit:"rem"}}function st(e){return{value:e,unit:"vw"}}function it(e){return{value:e,unit:"vh"}}function rt(e){return{value:e,unit:"%"}}class ut{constructor(){}mount(t){const n=document.querySelector(t),s=window.location.pathname;console.log(s);let i=d[s];if(!i){for(let r in d)if(new RegExp(r).test(s)){i=d[r];break}}if(i instanceof Function){const r=i();if(r)r instanceof a&&n?.replaceWith(r.render());else throw new Error(`Widget not found for ${s}`)}return this}}exports.BuderApp=ut;exports.BuderState=c;exports.BuderUnits=B;exports.BuderWidget=a;exports.Builder=L;exports.Button=M;exports.Canvas=Z;exports.Checkbox=K;exports.Column=W;exports.Flex=P;exports.H=$;exports.Input=H;exports.Label=J;exports.Picture=G;exports.Router=U;exports.Row=I;exports.Select=X;exports.Slider=Q;exports.Span=R;exports.Stack=F;exports.State=f;exports.TextArea=O;exports.Theme=k;exports.View=T;exports.W=D;exports._Builder=b;exports._Button=g;exports._Checkbox=S;exports._Column=y;exports._Flex=p;exports._Input=x;exports._Label=E;exports._Row=w;exports._Select=A;exports._Slider=C;exports._Span=v;exports._View=h;exports.diffApply=_;exports.em=et;exports.percent=rt;exports.px=tt;exports.rem=nt;exports.routerMap=d;exports.vh=it;exports.vw=st;
